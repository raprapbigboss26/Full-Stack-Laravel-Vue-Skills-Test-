import{a as D,bS as M,r as h,b as U,m as E,p as F,d as l,o as n,f as s,t,q as m,n as _,h as x,g as f,v,j as S,w as j}from"./index-Bx6MUOaO.js";import{u as B}from"./tasks-DRAxtuzy.js";const I={class:"min-h-screen bg-gray-50"},L={class:"max-w-3xl mx-auto py-6 sm:px-6 lg:px-8"},q={class:"px-4 sm:px-0"},z={class:"bg-white shadow rounded-lg"},G={class:"px-4 py-5 sm:p-6"},H={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},J={class:"sm:col-span-2"},K={class:"flex items-center"},O={class:"w-20 h-20 bg-primary-100 rounded-full flex items-center justify-center"},Q={class:"text-2xl font-medium text-primary-600"},R={class:"ml-4"},W={class:"text-lg font-medium text-gray-900"},X={class:"text-sm text-gray-500"},Y={class:"text-sm text-gray-500"},Z={key:0,class:"form-error"},$={key:0,class:"form-error"},ss={class:"text-sm text-gray-900"},es={class:"text-sm"},ts={key:0,class:"text-green-600"},os={key:1,class:"text-yellow-600"},as={class:"mt-6"},rs=["disabled"],ls={key:0,class:"absolute left-0 inset-y-0 flex items-center pl-3"},ns={class:"px-4 sm:px-0 mt-6"},ds={class:"bg-white shadow rounded-lg"},is={class:"px-4 py-5 sm:p-6"},ms={class:"grid grid-cols-1 gap-6"},us={key:0,class:"form-error"},ps={key:0,class:"form-error"},cs={key:0,class:"form-error"},fs={class:"mt-6"},_s=["disabled"],gs={key:0,class:"absolute left-0 inset-y-0 flex items-center pl-3"},ws={class:"px-4 sm:px-0 mt-6"},xs={class:"bg-white shadow rounded-lg"},vs={class:"px-4 py-5 sm:p-6"},ys={class:"grid grid-cols-1 gap-5 sm:grid-cols-3"},bs={class:"bg-gray-50 p-4 rounded-lg"},hs={class:"mt-1 text-2xl font-semibold text-gray-900"},ks={class:"bg-gray-50 p-4 rounded-lg"},Ps={class:"mt-1 text-2xl font-semibold text-green-600"},Cs={class:"bg-gray-50 p-4 rounded-lg"},Us={class:"mt-1 text-2xl font-semibold text-yellow-600"},Ns={__name:"ProfileView",setup(Ss){const o=D(),y=B(),b=M(),g=h(!1),w=h(!1),u=h({}),r=h({}),p=U({name:"",email:""}),d=U({current_password:"",new_password:"",new_password_confirmation:""}),V=E(()=>{var a;return(a=o.user)!=null&&a.name?o.user.name.split(" ").map(e=>e.charAt(0)).join("").toUpperCase().slice(0,2):"U"}),A=a=>a?new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A",N=async()=>{var a,e;g.value=!0,u.value={};try{o.updateUser({...o.user,name:p.name,email:p.email}),b.success("Profile updated successfully!")}catch(c){(e=(a=c.response)==null?void 0:a.data)!=null&&e.errors?u.value=c.response.data.errors:b.error("Failed to update profile")}finally{g.value=!1}},T=async()=>{var a,e;w.value=!0,r.value={};try{b.success("Password changed successfully!"),d.current_password="",d.new_password="",d.new_password_confirmation=""}catch(c){(e=(a=c.response)==null?void 0:a.data)!=null&&e.errors?r.value=c.response.data.errors:b.error("Failed to change password")}finally{w.value=!1}};return F(()=>{o.user&&(p.name=o.user.name,p.email=o.user.email),y.fetchTasks()}),(a,e)=>{var c,k,P,C;return n(),l("div",I,[s("div",L,[e[20]||(e[20]=s("div",{class:"px-4 py-6 sm:px-0"},[s("div",{class:"border-b border-gray-200 pb-5"},[s("h1",{class:"text-3xl font-bold leading-6 text-gray-900"},"Profile"),s("p",{class:"mt-2 max-w-4xl text-sm text-gray-500"}," Manage your account settings and preferences. ")])],-1)),s("div",q,[s("div",z,[s("div",G,[e[10]||(e[10]=s("h3",{class:"text-lg leading-6 font-medium text-gray-900 mb-4"}," Profile Information ",-1)),s("div",H,[s("div",J,[s("div",K,[s("div",O,[s("span",Q,t(V.value),1)]),s("div",R,[s("h4",W,t((c=m(o).user)==null?void 0:c.name),1),s("p",X,t((k=m(o).user)==null?void 0:k.email),1),s("p",Y,[s("span",{class:_(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",m(o).isAdmin?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"])},t(m(o).isAdmin?"Administrator":"User"),3)])])])]),s("div",null,[e[5]||(e[5]=s("label",{for:"name",class:"form-label"},"Full Name",-1)),x(s("input",{id:"name","onUpdate:modelValue":e[0]||(e[0]=i=>p.name=i),type:"text",class:_(["form-input",{"border-red-300":u.value.name}])},null,2),[[v,p.name]]),u.value.name?(n(),l("p",Z,t(u.value.name[0]),1)):f("",!0)]),s("div",null,[e[6]||(e[6]=s("label",{for:"email",class:"form-label"},"Email Address",-1)),x(s("input",{id:"email","onUpdate:modelValue":e[1]||(e[1]=i=>p.email=i),type:"email",class:_(["form-input",{"border-red-300":u.value.email}])},null,2),[[v,p.email]]),u.value.email?(n(),l("p",$,t(u.value.email[0]),1)):f("",!0)]),s("div",null,[e[7]||(e[7]=s("label",{class:"form-label"},"Member Since",-1)),s("p",ss,t(A((P=m(o).user)==null?void 0:P.created_at)),1)]),s("div",null,[e[8]||(e[8]=s("label",{class:"form-label"},"Email Status",-1)),s("p",es,[(C=m(o).user)!=null&&C.email_verified_at?(n(),l("span",ts," ✓ Verified ")):(n(),l("span",os," ⚠ Not verified "))])])]),s("div",as,[s("button",{onClick:N,disabled:g.value,class:"btn-primary"},[g.value?(n(),l("span",ls,e[9]||(e[9]=[s("div",{class:"loading-spinner"},null,-1)]))):f("",!0),S(" "+t(g.value?"Updating...":"Update Profile"),1)],8,rs)])])])]),s("div",ns,[s("div",ds,[s("div",is,[e[15]||(e[15]=s("h3",{class:"text-lg leading-6 font-medium text-gray-900 mb-4"}," Change Password ",-1)),s("form",{onSubmit:j(T,["prevent"])},[s("div",ms,[s("div",null,[e[11]||(e[11]=s("label",{for:"current_password",class:"form-label"},"Current Password",-1)),x(s("input",{id:"current_password","onUpdate:modelValue":e[2]||(e[2]=i=>d.current_password=i),type:"password",class:_(["form-input",{"border-red-300":r.value.current_password}])},null,2),[[v,d.current_password]]),r.value.current_password?(n(),l("p",us,t(r.value.current_password[0]),1)):f("",!0)]),s("div",null,[e[12]||(e[12]=s("label",{for:"new_password",class:"form-label"},"New Password",-1)),x(s("input",{id:"new_password","onUpdate:modelValue":e[3]||(e[3]=i=>d.new_password=i),type:"password",class:_(["form-input",{"border-red-300":r.value.new_password}])},null,2),[[v,d.new_password]]),r.value.new_password?(n(),l("p",ps,t(r.value.new_password[0]),1)):f("",!0)]),s("div",null,[e[13]||(e[13]=s("label",{for:"new_password_confirmation",class:"form-label"},"Confirm New Password",-1)),x(s("input",{id:"new_password_confirmation","onUpdate:modelValue":e[4]||(e[4]=i=>d.new_password_confirmation=i),type:"password",class:_(["form-input",{"border-red-300":r.value.new_password_confirmation}])},null,2),[[v,d.new_password_confirmation]]),r.value.new_password_confirmation?(n(),l("p",cs,t(r.value.new_password_confirmation[0]),1)):f("",!0)])]),s("div",fs,[s("button",{type:"submit",disabled:w.value,class:"btn-secondary"},[w.value?(n(),l("span",gs,e[14]||(e[14]=[s("div",{class:"loading-spinner"},null,-1)]))):f("",!0),S(" "+t(w.value?"Changing...":"Change Password"),1)],8,_s)])],32)])])]),s("div",ws,[s("div",xs,[s("div",vs,[e[19]||(e[19]=s("h3",{class:"text-lg leading-6 font-medium text-gray-900 mb-4"}," Account Statistics ",-1)),s("div",ys,[s("div",bs,[e[16]||(e[16]=s("dt",{class:"text-sm font-medium text-gray-500"},"Total Tasks",-1)),s("dd",hs,t(m(y).taskCount.total),1)]),s("div",ks,[e[17]||(e[17]=s("dt",{class:"text-sm font-medium text-gray-500"},"Completed",-1)),s("dd",Ps,t(m(y).taskCount.completed),1)]),s("div",Cs,[e[18]||(e[18]=s("dt",{class:"text-sm font-medium text-gray-500"},"Pending",-1)),s("dd",Us,t(m(y).taskCount.pending),1)])])])])])])])}}};export{Ns as default};
